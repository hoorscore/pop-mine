'package:flutter/material.dart';

class PrivacyPolicyPage extends StatefulWidget {
  @override
  _PrivacyPolicyPageState createState() => _PrivacyPolicyPageState();
}

class _PrivacyPolicyPageState extends State<PrivacyPolicyPage> {
  bool isAdmin = true; // Set to true for admin access
  String privacyText =
      "آخر تحديث 23 نوفمبر 2024\n\nتصف سياسة الخصوصية الإجراءات بشأن جمع معلوماتك واستخدامها...\n\n"
      "نحن فريق PopList نستخدم بياناتك الشخصية لتوفير الخدمة وتحسينها. لذا باستخدامك هذه الخدمة أنت تقر بأنك توافق على جمع واستخدام البيانات وفقًا لسياسة الخصوصية.\n\n"
      "ونوّد التنويه بأنه سيتم إبلاغك بالتغييرات في حال تم تحديث سياسة الخصوصية.";

  // Function to edit privacy policy
  void _editPrivacyPolicy() {
    TextEditingController controller = TextEditingController(text: privacyText);
    showDialog(
      context: context,
      builder: (context) {
        return AlertDialog(
          title: Text("تعديل سياسة الخصوصية"),
          content: TextField(
            controller: controller,
            maxLines: 10,
            decoration: InputDecoration(border: OutlineInputBorder()),
          ),
          actions: [
            TextButton(
              onPressed: () => Navigator.pop(context),
              child: Text("إلغاء"),
            ),
            TextButton(
              onPressed: () {
                setState(() {
                  privacyText = controller.text;
                });
                Navigator.pop(context);
              },
              child: Text("حفظ"),
            ),
          ],
        );
      },
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Colors.blue,
        title: Text("سياسة الخصوصية", style: TextStyle(fontWeight: FontWeight.bold)),
        leading: IconButton(
          icon: Icon(Icons.arrow_back),
          onPressed: () => Navigator.pop(context),
        ),
        actions: [
          if (isAdmin) // Show edit button only for admin
            IconButton(
              icon: Icon(Icons.edit),
              onPressed: _editPrivacyPolicy,
            ),
        ],
      ),
      body: Stack(
        children: [
          // Background Image
          Container(
            decoration: BoxDecoration(
              image: DecorationImage(
                image: AssetImage("assets/img4.jpg"), // Ensure this image exists
                fit: BoxFit.cover,
              ),
            ),
          ),
          SingleChildScrollView(
            child: Padding(
              padding: const EdgeInsets.all(16.0),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.center,
                children: [
                  // Privacy Policy Content
                  Container(
                    padding: EdgeInsets.all(16),
                    decoration: BoxDecoration(
                      color: Colors.white.withOpacity(0.9),
                      borderRadius: BorderRadius.circular(12),
                    ),
                    child: Text(
                      privacyText,
                      textAlign: TextAlign.center,
                      style: TextStyle(fontSize: 16, height: 1.5, color: Colors.black87),
                    ),
                  ),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}
